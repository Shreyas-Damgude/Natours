{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/updateSettings.js"],"sourcesContent":["function $7dc87b7f457e655a$export$516836c6a9dfc573() {\n    const el = document.querySelector(\".alert\");\n    el === null || el === void 0 ? void 0 : el.parentElement.removeChild(el);\n}\nfunction $7dc87b7f457e655a$export$de026b00723010c1(type, msg) {\n    $7dc87b7f457e655a$export$516836c6a9dfc573();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($7dc87b7f457e655a$export$516836c6a9dfc573, 2000);\n}\n\n\nasync function $bf5b431e6a69fea8$export$596d806903d1f59e(email, password) {\n    try {\n        const res = await axios({\n            method: \"POST\",\n            url: \"/api/v1/users/login\",\n            data: {\n                email: email,\n                password: password\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", \"Logged in successfully!\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1000);\n        }\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n}\nasync function $bf5b431e6a69fea8$export$a0973bcfe11b05c9() {\n    try {\n        const res = await axios({\n            method: \"GET\",\n            url: \"/api/v1/users/logout\"\n        });\n        if (res.data.status === \"success\") location.reload(true);\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", \"Error logging out! Try again\");\n    }\n}\n\n\n\nasync function $955535ce7513e32c$export$f558026a994b6051(data, type) {\n    try {\n        const url = `/api/v1/users/update${type === \"password\" ? \"Password\" : \"Me\"}`;\n        const res = await axios({\n            method: \"PATCH\",\n            url: url,\n            data: data\n        });\n        if (res.data.status === \"success\") (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", `${type.toUpperCase()} Updated Successfully`);\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n}\n\n\nvar // Delegation\n$407eccdc61ba7a94$var$_document_querySelector, $407eccdc61ba7a94$var$_document_querySelector1, $407eccdc61ba7a94$var$_document_querySelector2, $407eccdc61ba7a94$var$_document_querySelector3;\n($407eccdc61ba7a94$var$_document_querySelector = document.querySelector(\".form--login\")) === null || $407eccdc61ba7a94$var$_document_querySelector === void 0 ? void 0 : $407eccdc61ba7a94$var$_document_querySelector.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const email = document.querySelector(\"#email\").value;\n    const password = document.querySelector(\"#password\").value;\n    (0, $bf5b431e6a69fea8$export$596d806903d1f59e)(email, password);\n});\n($407eccdc61ba7a94$var$_document_querySelector1 = document.querySelector(\".nav__el--logout\")) === null || $407eccdc61ba7a94$var$_document_querySelector1 === void 0 ? void 0 : $407eccdc61ba7a94$var$_document_querySelector1.addEventListener(\"click\", (0, $bf5b431e6a69fea8$export$a0973bcfe11b05c9));\n($407eccdc61ba7a94$var$_document_querySelector2 = document.querySelector(\".form-user-data\")) === null || $407eccdc61ba7a94$var$_document_querySelector2 === void 0 ? void 0 : $407eccdc61ba7a94$var$_document_querySelector2.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    form.append(\"name\", document.querySelector(\"#name\").value);\n    form.append(\"email\", document.querySelector(\"#email\").value);\n    form.append(\"photo\", document.querySelector(\"#photo\").files[0]);\n    (0, $955535ce7513e32c$export$f558026a994b6051)(form, \"data\");\n});\n($407eccdc61ba7a94$var$_document_querySelector3 = document.querySelector(\".form-user-password\")) === null || $407eccdc61ba7a94$var$_document_querySelector3 === void 0 ? void 0 : $407eccdc61ba7a94$var$_document_querySelector3.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n    const passwordCurrent = document.querySelector(\"#password-current\").value;\n    const password = document.querySelector(\"#password\").value;\n    const passwordConfirm = document.querySelector(\"#password-confirm\").value;\n    await (0, $955535ce7513e32c$export$f558026a994b6051)({\n        passwordCurrent: passwordCurrent,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, \"password\");\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.querySelector(\"#password-current\").value = \"\";\n    document.querySelector(\"#password\").value = \"\";\n    document.querySelector(\"#password-confirm\").value = \"\";\n});\n\n\n//# sourceMappingURL=index.js.map\n","import { login, logout } from \"./login\";\nimport { updateSettings } from \"./updateSettings\";\n\n// Delegation\ndocument.querySelector(\".form--login\")?.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const email = document.querySelector(\"#email\").value;\n  const password = document.querySelector(\"#password\").value;\n  login(email, password);\n});\n\ndocument.querySelector(\".nav__el--logout\")?.addEventListener(\"click\", logout);\n\ndocument.querySelector(\".form-user-data\")?.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const form = new FormData();\n  form.append(\"name\", document.querySelector(\"#name\").value);\n  form.append(\"email\", document.querySelector(\"#email\").value);\n  form.append(\"photo\", document.querySelector(\"#photo\").files[0]);\n\n  updateSettings(form, \"data\");\n});\n\ndocument\n  .querySelector(\".form-user-password\")\n  ?.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n    const passwordCurrent = document.querySelector(\"#password-current\").value;\n    const password = document.querySelector(\"#password\").value;\n    const passwordConfirm = document.querySelector(\"#password-confirm\").value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      \"password\"\n    );\n\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.querySelector(\"#password-current\").value = \"\";\n    document.querySelector(\"#password\").value = \"\";\n    document.querySelector(\"#password-confirm\").value = \"\";\n  });\n","import { showAlert } from \"./alerts\";\r\n\r\nexport async function login(email, password) {\r\n  try {\r\n    const res = await axios({\r\n      method: \"POST\",\r\n      url: \"/api/v1/users/login\",\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === \"success\") {\r\n      showAlert(\"success\", \"Logged in successfully!\");\r\n      window.setTimeout(() => {\r\n        location.assign(\"/\");\r\n      }, 1000);\r\n    }\r\n  } catch (err) {\r\n    showAlert(\"error\", err.response.data.message);\r\n  }\r\n}\r\n\r\nexport async function logout() {\r\n  try {\r\n    const res = await axios({\r\n      method: \"GET\",\r\n      url: \"/api/v1/users/logout\",\r\n    });\r\n\r\n    if (res.data.status === \"success\") location.reload(true);\r\n  } catch (err) {\r\n    showAlert(\"error\", \"Error logging out! Try again\");\r\n  }\r\n}\r\n","export function hideAlert() {\r\n  const el = document.querySelector(\".alert\");\r\n  el?.parentElement.removeChild(el);\r\n}\r\n\r\nexport function showAlert(type, msg) {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\r\n  window.setTimeout(hideAlert, 2000);\r\n}\r\n","import { showAlert } from \"./alerts\";\r\n\r\nexport async function updateSettings(data, type) {\r\n  try {\r\n    const url = `/api/v1/users/update${\r\n      type === \"password\" ? \"Password\" : \"Me\"\r\n    }`;\r\n\r\n    const res = await axios({\r\n      method: \"PATCH\",\r\n      url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === \"success\")\r\n      showAlert(\"success\", `${type.toUpperCase()} Updated Successfully`);\r\n  } catch (err) {\r\n    showAlert(\"error\", err.response.data.message);\r\n  }\r\n}\r\n"],"names":["$407eccdc61ba7a94$var$_document_querySelector","$407eccdc61ba7a94$var$_document_querySelector1","$407eccdc61ba7a94$var$_document_querySelector2","$407eccdc61ba7a94$var$_document_querySelector3","$7dc87b7f457e655a$export$516836c6a9dfc573","el","document","querySelector","parentElement","removeChild","$7dc87b7f457e655a$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$bf5b431e6a69fea8$export$596d806903d1f59e","email","password","res","axios","method","url","data","status","location","assign","err","response","message","$bf5b431e6a69fea8$export$a0973bcfe11b05c9","reload","$955535ce7513e32c$export$f558026a994b6051","toUpperCase","addEventListener","e","preventDefault","value","form","FormData","append","files","textContent","passwordCurrent","passwordConfirm"],"version":3,"file":"index.js.map","sourceRoot":"../../"}